image:
  # set up tcpdump so we don't have to install it manually
  file: .gitpod.Dockerfile

tasks:
  - name: shuffle up the concurrent connection values
    before: shuf .env.suspects > .env.suspects.tmp && mv .env.suspects.tmp .env.suspects
  - name: set up the random suspect environment variables
    init: ./randomize_suspects.sh
  - name: start the containers
    command: docker-compose --env-file .env.suspects up --build

ports:
  # we'll use this to check how quickly the website loads
  - port: 3000
    onOpen: open-preview
